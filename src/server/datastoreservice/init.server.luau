-- DataStoreé¡¶çº§æœåŠ¡å…¥å£
-- è´Ÿè´£ç©å®¶æ•°æ®åŠ è½½å’Œæ•°æ®æŒä¹…åŒ–ç®¡ç†

print("ğŸš€ [DataStoreService] æ•°æ®æœåŠ¡å¯åŠ¨ä¸­...")

-- è·å–DataStoreæœåŠ¡æ¨¡å—çš„è¾…åŠ©å‡½æ•°
local function getDataStoreModule(moduleName)
    local ServerScriptService = game:GetService("ServerScriptService")
    local serverFolder = ServerScriptService:FindFirstChild("Server")
    if serverFolder then
        local datastoreFolder = serverFolder:FindFirstChild("datastoreservice")
        if datastoreFolder and datastoreFolder:FindFirstChild(moduleName) then
            return require(datastoreFolder[moduleName])
        end
    end
    error("âŒ æ— æ³•åŠ è½½æ•°æ®æœåŠ¡æ¨¡å—: " .. moduleName)
end

-- åˆå§‹åŒ–DataStoreç®¡ç†å™¨
local DataStoreManager = getDataStoreModule("DataStoreManager")
DataStoreManager.initialize()

-- åˆå§‹åŒ–ç”¨æˆ·æ•°æ®æœåŠ¡
local UserDataService = getDataStoreModule("UserDataService")

-- åˆå§‹åŒ–ç®¡ç†å‘˜æ•°æ®æœåŠ¡
local AdminDataService = getDataStoreModule("AdminDataService")

print("âœ… [DataStoreService] æ•°æ®æœåŠ¡å¯åŠ¨å®Œæˆ")

-- å¯¼å‡ºæœåŠ¡æ¨¡å—ä¾›å…¶ä»–æœåŠ¡ä½¿ç”¨
return {
    DataStoreManager = DataStoreManager,
    UserDataService = UserDataService,
    AdminDataService = AdminDataService
}
