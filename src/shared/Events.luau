local ReplicatedStorage = game:GetService("ReplicatedStorage")

local Events = {}

-- åˆ›å»ºäº‹ä»¶æ–‡ä»¶å¤¹
local eventsFolder = ReplicatedStorage:FindFirstChild("ShopEvents")
if not eventsFolder then
    eventsFolder = Instance.new("Folder")
    eventsFolder.Name = "ShopEvents"
    eventsFolder.Parent = ReplicatedStorage
end

-- åˆ›å»ºè¿œç¨‹äº‹ä»¶çš„è¾…åŠ©å‡½æ•°
local function createRemoteEvent(name)
    local event = eventsFolder:FindFirstChild(name)
    if not event then
        event = Instance.new("RemoteEvent")
        event.Name = name
        event.Parent = eventsFolder
    end
    return event
end

-- åˆ›å»ºè¿œç¨‹å‡½æ•°çš„è¾…åŠ©å‡½æ•°
local function createRemoteFunction(name)
    local func = eventsFolder:FindFirstChild(name)
    if not func then
        func = Instance.new("RemoteFunction")
        func.Name = name
        func.Parent = eventsFolder
    end
    return func
end

-- ==============================================
-- æ™®é€šç”¨æˆ·äº‹ä»¶
-- ==============================================
Events.User = {
    -- æ•°æ®ç›¸å…³
    GetPlayerData = createRemoteEvent("GetPlayerData"),
    GetShopData = createRemoteEvent("GetShopData"),
    GetTransactions = createRemoteEvent("GetTransactions"),

    -- äº¤æ˜“ç›¸å…³
    BuyItem = createRemoteEvent("BuyItem"),
    SellItem = createRemoteEvent("SellItem"),

    -- é€šç”¨åŠŸèƒ½
    RefreshData = createRemoteEvent("RefreshData"),

    -- ä¼šå‘˜çŠ¶æ€é€šçŸ¥
    MembershipStatusChanged = createRemoteEvent("MembershipStatusChanged"),
}

-- ==============================================
-- ç®¡ç†å‘˜äº‹ä»¶
-- ==============================================
Events.Admin = {
    -- ç”¨æˆ·ç®¡ç†
    GetAllUsers = createRemoteEvent("AdminGetAllUsers"),
    SetUserCoins = createRemoteEvent("AdminSetUserCoins"),
    GetUserHistory = createRemoteEvent("AdminGetUserHistory"),

    -- ä¼šå‘˜ç®¡ç†
    GetMembersList = createRemoteEvent("AdminGetMembersList"),
    GetAllUsersWithMembership = createRemoteEvent("AdminGetAllUsersWithMembership"),
    GetMembershipStatus = createRemoteEvent("AdminGetMembershipStatus"),
    UpdateMembership = createRemoteEvent("AdminUpdateMembership"),
    AddMembership = createRemoteEvent("AdminAddMembership"),
    CancelMembership = createRemoteEvent("AdminCancelMembership"),
    ExtendMembership = createRemoteEvent("AdminExtendMembership"),
    BatchMembershipOp = createRemoteEvent("AdminBatchMembershipOp"),
    ManageUserMembership = createRemoteEvent("AdminManageUserMembership"),

    -- æƒé™æ£€æŸ¥
    CheckPermission = createRemoteFunction("AdminCheckPermission"),
}

-- ==============================================
-- æ— äººæœºäº‹ä»¶
-- ==============================================
Events.Drone = {
    -- æ— äººæœºæ§åˆ¶
    SpawnDrone = createRemoteEvent("SpawnDrone"),
    RecallDrone = createRemoteEvent("RecallDrone"),
    SwitchDroneMode = createRemoteEvent("SwitchDroneMode"),

    -- å®¢æˆ·ç«¯å›è°ƒäº‹ä»¶
    DroneSpawned = createRemoteEvent("DroneSpawned"),
    DroneRecalled = createRemoteEvent("DroneRecalled"),
    DroneModeChanged = createRemoteEvent("DroneModeChanged"),
    DroneDestroyed = createRemoteEvent("DroneDestroyed"),
    DroneAttack = createRemoteEvent("DroneAttack"),
}

-- ==============================================
-- é¶å­ç³»ç»Ÿäº‹ä»¶
-- ==============================================
Events.Target = {
    -- é¶å­çŠ¶æ€äº‹ä»¶
    TargetCreated = createRemoteEvent("TargetCreated"),
    TargetDestroyed = createRemoteEvent("TargetDestroyed"),
    TargetDamaged = createRemoteEvent("TargetDamaged"),
    TargetRespawned = createRemoteEvent("TargetRespawned"),

    -- é¶å­ä¿¡æ¯è¯·æ±‚
    RequestTargetStatus = createRemoteEvent("RequestTargetStatus"),
    TargetStatusUpdate = createRemoteEvent("TargetStatusUpdate"),
}

-- ==============================================
-- ç¼“å­˜åŒæ­¥äº‹ä»¶
-- ==============================================
Events.Cache = {
    -- æ•°æ®åˆ·æ–°é€šçŸ¥ï¼ˆæœåŠ¡ç«¯ -> å®¢æˆ·ç«¯ï¼‰
    DataRefreshNotify = createRemoteEvent("CacheDataRefreshNotify"),

    -- ç”¨æˆ·æ•°æ®æ›´æ–°é€šçŸ¥
    UserDataUpdated = createRemoteEvent("CacheUserDataUpdated"),

    -- å•†åº—æ•°æ®æ›´æ–°é€šçŸ¥
    ShopDataUpdated = createRemoteEvent("CacheShopDataUpdated"),

    -- ä¼šå‘˜çŠ¶æ€æ›´æ–°é€šçŸ¥
    MembershipUpdated = createRemoteEvent("CacheMembershipUpdated"),

    -- ç³»ç»Ÿé…ç½®æ›´æ–°é€šçŸ¥
    SystemConfigUpdated = createRemoteEvent("CacheSystemConfigUpdated"),

    -- å¼ºåˆ¶åˆ·æ–°è¯·æ±‚ï¼ˆå®¢æˆ·ç«¯ -> æœåŠ¡ç«¯ï¼‰
    ForceRefresh = createRemoteEvent("CacheForceRefresh"),

    -- ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯è¯·æ±‚ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
    GetCacheStats = createRemoteFunction("CacheGetStats"),

    -- ç¼“å­˜ç®¡ç†æ“ä½œï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
    ManageCache = createRemoteEvent("CacheManageCache")
}

-- åˆ é™¤äº†å‘åå…¼å®¹ä»£ç  - ä½¿ç”¨æ–°çš„åˆ†ç¦»å¼äº‹ä»¶ç»“æ„

print("ğŸ“¡ å•†åº—äº‹ä»¶ç³»ç»Ÿå·²åˆå§‹åŒ– (ç®€åŒ–ç‰ˆ)")

return Events
