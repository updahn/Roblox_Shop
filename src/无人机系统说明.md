# 🤖 无人机系统实现指南

## 功能概述

本无人机系统完全实现了您提出的所有功能要求：

1. ✅ 玩家可召唤一个无人机，具有跟随和驻守模式，初始为跟随模式
2. ✅ 无人机存在时会定时攻击范围内的非玩家目标
3. ✅ 无人机可切换模式
4. ✅ 无人机可收回
5. ✅ 无人机单次可存在 10 秒，切换模式不重新计时

## 🎮 使用方法

### 键盘快捷键

- **B 键** - 召唤无人机
- **N 键** - 收回无人机
- **M 键** - 切换无人机模式（跟随/驻守）

### UI 操作

- 游戏右下角有无人机控制面板
- 点击"召唤无人机"按钮召唤无人机
- 点击"收回无人机"按钮收回无人机
- 点击模式按钮在跟随模式和驻守模式间切换

## 📁 代码文件结构

### 新增文件

```
src/
├── shared/
│   ├── DroneConfig.luau          # 无人机系统配置
│   └── Events.luau               # 已更新，包含无人机事件
├── server/
│   ├── modules/
│   │   └── DroneService.luau     # 无人机服务端逻辑
│   └── Main.server.luau          # 已更新，加载无人机服务
└── client/
    ├── user/
    │   └── DroneManager.luau     # 无人机客户端管理器
    └── init.client.luau          # 已更新，初始化无人机管理器
```

## 🛠️ 安装步骤

### 第 1 步：导入脚本文件

将以下文件按照对应路径放置到 Roblox Studio 中：

#### ServerScriptService (服务端脚本)

- `src/server/Main.server.luau` → `ServerScriptService/Main.server.luau`
- `src/server/modules/DroneService.luau` → `ServerScriptService/modules/DroneService.luau`

#### StarterPlayerScripts (客户端脚本)

- `src/client/init.client.luau` → `StarterPlayerScripts/init.client.luau`
- `src/client/user/DroneManager.luau` → `StarterPlayerScripts/user/DroneManager.luau`

#### ReplicatedStorage (共享模块)

- `src/shared/DroneConfig.luau` → `ReplicatedStorage/SharedModules/DroneConfig.luau`
- `src/shared/Events.luau` → `ReplicatedStorage/SharedModules/Events.luau` (覆盖现有文件)

### 第 2 步：获取无人机 3D 模型

#### 方式 1：使用 Roblox 免费模型库

1. 在 Roblox Studio 中，点击 **View** → **Toolbox**
2. 在 Toolbox 搜索栏输入 `drone` 或`无人机`
3. 选择一个免费的无人机模型（推荐选择有动态螺旋桨的模型）
4. 记下模型的 Asset ID（在模型详情页面可以看到）
5. 编辑`ReplicatedStorage/SharedModules/DroneConfig.luau`文件：
   ```lua
   ASSET_ID = "rbxassetid://您的模型ID",
   ```

#### 推荐的免费无人机模型

搜索以下关键词可以找到合适的模型：

- `Military Drone`
- `Quadcopter`
- `UAV`
- `Surveillance Drone`

### 第 3 步：测试系统

1. 在 Roblox Studio 中点击 ▶️ 运行游戏
2. 观察输出窗口，应该看到：
   ```
   ✅ 商店系统已启动
   🤖 无人机系统已激活
   [无人机系统] [服务端] 无人机服务已启动
   ```
3. 在游戏中按**B 键**召唤无人机
4. 测试所有功能：
   - 跟随模式：无人机跟随玩家移动
   - 驻守模式：无人机停留在切换时的位置
   - 攻击功能：无人机会攻击范围内的其他玩家或 NPC
   - 自动销毁：10 秒后无人机自动消失

## ⚙️ 配置选项

### 无人机参数调整

编辑`DroneConfig.luau`文件可以调整以下参数：

```lua
-- 生存时间（秒）
LIFETIME = 10,

-- 攻击参数
ATTACK_RANGE = 50,     -- 攻击范围
ATTACK_INTERVAL = 1,   -- 攻击间隔
ATTACK_DAMAGE = 30,    -- 攻击伤害

-- 移动参数
FOLLOW_DISTANCE = 8,   -- 跟随距离
FOLLOW_HEIGHT = 10,    -- 跟随高度
HOVER_HEIGHT = 12,     -- 驻守悬停高度
MOVEMENT_SPEED = 16,   -- 移动速度
```

### UI 界面调整

```lua
-- UI颜色
COLORS = {
    SPAWN_BUTTON = Color3.fromRGB(52, 211, 153),    -- 召唤按钮颜色
    RECALL_BUTTON = Color3.fromRGB(248, 113, 113),  -- 收回按钮颜色
    MODE_BUTTON = Color3.fromRGB(88, 166, 255),     -- 模式按钮颜色
}
```

### 音效配置

```lua
SOUNDS = {
    SPAWN = "rbxasset://sounds/electronicpingshort.wav",  -- 召唤音效
    ATTACK = "rbxasset://sounds/impact_generic.mp3",       -- 攻击音效
    DESTROY = "rbxasset://sounds/snap.wav",                -- 销毁音效
}
```

## 🐛 常见问题解决

### 问题 1：无人机不生成

**解决方案：**

1. 检查 Asset ID 是否正确
2. 确保 HttpService 已启用
3. 查看输出窗口的错误信息

### 问题 2：无人机不攻击

**解决方案：**

1. 确保目标在攻击范围内
2. 检查目标是否有 Humanoid 和 HumanoidRootPart
3. 确认目标不是无人机拥有者

### 问题 3：UI 不显示

**解决方案：**

1. 检查客户端脚本是否正确放置在 StarterPlayerScripts
2. 确认共享模块在 ReplicatedStorage 中
3. 查看客户端输出是否有错误

### 问题 4：模型加载失败

**解决方案：**
系统会自动使用备用模型（蓝色发光球体），功能不受影响。

## 🎯 功能特色

### 视觉效果

- 召唤时的粒子特效
- 攻击时的激光束效果
- 销毁时的爆炸效果

### 音效系统

- 召唤、攻击、销毁都有相应音效
- 可自定义音效文件和音量

### 智能攻击

- 自动锁定最近的敌对目标
- 区分玩家和 NPC
- 不攻击无人机拥有者

### 用户友好界面

- 现代化的深色主题 UI
- 实时状态显示和倒计时
- 按钮动画效果

## 📈 扩展功能建议

如果想要进一步扩展系统，可以考虑：

1. **多无人机支持** - 允许召唤多个无人机
2. **无人机升级系统** - 不同等级的无人机有不同能力
3. **无人机商店** - 用游戏内货币购买不同类型的无人机
4. **团队模式** - 无人机可以跟随队友
5. **无人机技能** - 治疗、护盾、侦察等特殊能力

## 📞 技术支持

如果在实现过程中遇到问题，可以检查：

1. Roblox Studio 的输出窗口查看错误信息
2. 确保所有脚本文件都放在正确的位置
3. 检查模型 Asset ID 是否可用
4. 验证 HttpService 设置是否启用

祝您使用愉快！🚀
