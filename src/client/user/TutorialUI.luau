-- å¼•å¯¼æ•™ç¨‹UIæ¨¡å—

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local TutorialUI = {}

-- ç§æœ‰å˜é‡
local tutorialGui = nil
local isShowing = false
local currentStep = 1

-- æ•™ç¨‹æ­¥éª¤æ•°æ® - ç²¾ç®€çš„æ–°æ‰‹å¼•å¯¼
local tutorialSteps = {
    {
        title = "ğŸ‰ æ¬¢è¿æ¥åˆ°å•†åº—ç³»ç»Ÿ",
        content = "æ¬¢è¿ä½“éªŒåŠŸèƒ½å®Œæ•´çš„å•†åº—ç³»ç»Ÿï¼\n\nğŸª ä¸°å¯Œå•†å“åˆ†ç±»\nâ€¢ æ­¦å™¨è£…å¤‡ â€¢ æ¶ˆè€—å“\nâ€¢ çè´µææ–™ â€¢ å·¥å…·ä¹¦ç±\nâ€¢ ä¼šå‘˜ç‰¹æƒ\n\nâœ¨ æ ¸å¿ƒåŠŸèƒ½\nâ€¢ æ™ºèƒ½äº¤æ˜“ â€¢ é‡‘å¸ç®¡ç†\nâ€¢ äº¤æ˜“è®°å½• â€¢ ä¼šå‘˜ç³»ç»Ÿ",
        buttonText = "å¼€å§‹æ•™ç¨‹"
    },
    {
        title = "ğŸ’° é‡‘å¸ç»æµç³»ç»Ÿ",
        content = "ğŸ’ èµ·å§‹èµ„é‡‘ï¼š1000 é‡‘å¸\n\nğŸ’° è·å–é‡‘å¸\nâ€¢ å‡ºå”®ç‰©å“ï¼ˆ80% å›æ”¶ä»·ï¼‰\nâ€¢ ä¼šå‘˜æ¯æ—¥å¥–åŠ±\nâ€¢ æ´»åŠ¨å¥–åŠ±\n\nğŸ’¸ æ¶ˆè´¹æ–¹å¼\nâ€¢ è´­ä¹°å•†å“ï¼ˆå«5%ç¨è´¹ï¼‰\nâ€¢ å‡çº§ä¼šå‘˜\nâ€¢ é™é‡ç¨€æœ‰ç‰©å“\n\nğŸ“Š å®æ—¶ä½™é¢æ˜¾ç¤º",
        buttonText = "ç»§ç»­"
    },
    {
        title = "ğŸ›ï¸ æ“ä½œæŒ‡å—",
        content = "âŒ¨ï¸ å¿«æ·é”®\nâ€¢ E - æ‰“å¼€å•†åº—\nâ€¢ H - æŸ¥çœ‹å¸®åŠ©\nâ€¢ B - å¬å”¤æ— äººæœº\nâ€¢ N - æ”¶å›æ— äººæœº\nâ€¢ M - åˆ‡æ¢æ— äººæœºæ¨¡å¼\n\nğŸ–±ï¸ é¼ æ ‡æ“ä½œ\nâ€¢ å·¦é”® - é€‰æ‹©ç¡®è®¤\nâ€¢ æ»šè½® - æµè§ˆå•†å“\n\nğŸ“± ç•Œé¢å¸ƒå±€\nâ€¢ é¡¶éƒ¨ï¼šä½™é¢ä¿¡æ¯\nâ€¢ å·¦ä¾§ï¼šåˆ†ç±»å¯¼èˆª\nâ€¢ ä¸­å¤®ï¼šå•†å“å±•ç¤º\nâ€¢ åº•éƒ¨ï¼šæ“ä½œæŒ‰é’®",
        buttonText = "æ˜ç™½äº†"
    },
    {
        title = "ğŸ›’ è´­ä¹°æµç¨‹",
        content = "ğŸª ç®€å•å››æ­¥éª¤\n1ï¸âƒ£ æµè§ˆå•†å“\n2ï¸âƒ£ é€‰æ‹©ç‰©å“\n3ï¸âƒ£ è®¾å®šæ•°é‡\n4ï¸âƒ£ ç¡®è®¤è´­ä¹°\n\nğŸ·ï¸ å•†å“ä¿¡æ¯\nâ€¢ ä»·æ ¼å’Œç¨è´¹é€æ˜\nâ€¢ åº“å­˜å®æ—¶æ›´æ–°\nâ€¢ é™è´­è§„åˆ™æ˜ç¡®\n\nâš ï¸ è´­ä¹°æç¤º\nâ€¢ æ£€æŸ¥ä½™é¢å……è¶³\nâ€¢ æ³¨æ„é™è´­æ•°é‡",
        buttonText = "ç»§ç»­"
    },
    {
        title = "ğŸ’¸ å‡ºå”®ç³»ç»Ÿ",
        content = "ğŸ’° å‡ºå”®è§„åˆ™\nâ€¢ 80% å›æ”¶ä»·æ ¼\nâ€¢ æ‰¹é‡å‡ºå”®æ”¯æŒ\nâ€¢ å³æ—¶åˆ°è´¦æ— å»¶è¿Ÿ\n\nğŸ“¦ åº“å­˜ç®¡ç†\nâ€¢ åˆ†ç±»æ˜¾ç¤ºæ‰€æœ‰ç‰©å“\nâ€¢ æ˜¾ç¤ºæ•°é‡å’Œä»·å€¼\nâ€¢ æœç´¢ç­›é€‰åŠŸèƒ½\n\nğŸ’¡ å‡ºå”®å»ºè®®\nâ€¢ ä¼˜å…ˆå‡ºå”®è¿‡é‡æ™®é€šç‰©å“\nâ€¢ ä¿ç•™ç¨€æœ‰ç‰©å“",
        buttonText = "ä¸‹ä¸€æ­¥"
    },
    {
        title = "ğŸ“Š äº¤æ˜“è®°å½•",
        content = "ğŸ“‹ è®°å½•å†…å®¹\nâ€¢ å®Œæ•´è´­ä¹°å‡ºå”®å†å²\nâ€¢ ç²¾ç¡®æ—¶é—´å’Œé‡‘é¢\nâ€¢ é‡‘å¸å˜åŒ–è¯¦æƒ…\n\nğŸ” æŸ¥è¯¢åŠŸèƒ½\nâ€¢ æ—¶é—´èŒƒå›´ç­›é€‰\nâ€¢ äº¤æ˜“ç±»å‹åˆ†ç±»\nâ€¢ ç‰©å“åç§°æœç´¢\nâ€¢ å¯¼å‡ºäº¤æ˜“æ•°æ®\n\nğŸ“ˆ æ•°æ®ç»Ÿè®¡\nâ€¢ æ€»äº¤æ˜“æ¬¡æ•°å’Œé‡‘é¢\nâ€¢ æ”¶å…¥æ”¯å‡ºåˆ†æ\nâ€¢ ç‰©å“äº¤æ˜“æ’è¡Œ",
        buttonText = "äº†è§£äº†"
    },
    {
        title = "ğŸ¤– æ— äººæœºç³»ç»Ÿ",
        content = "ğŸš æ— äººæœºåŠŸèƒ½\nâ€¢ æ™ºèƒ½AIæˆ˜æ–—ä¼™ä¼´\nâ€¢ è‡ªåŠ¨è·Ÿéšå¹¶ä¿æŠ¤ç©å®¶\nâ€¢ å¼ºå¤§çš„è‡ªåŠ¨æ”»å‡»èƒ½åŠ›\nâ€¢ 10ç§’ç”Ÿå­˜æ—¶é—´\n\nâŒ¨ï¸ æ— äººæœºå¿«æ·é”®\nâ€¢ B - å¬å”¤æ— äººæœº\nâ€¢ N - æ”¶å›æ— äººæœº\nâ€¢ M - åˆ‡æ¢æ¨¡å¼(è·Ÿéš/é©»å®ˆ)\n\nğŸ¯ é¶å­è®­ç»ƒåœº\nâ€¢ 3ä¸ªä¸“ç”¨è®­ç»ƒé¶å­\nâ€¢ æ— äººæœºä¼˜å…ˆæ”»å‡»é¶å­\nâ€¢ é¶å­è‡ªåŠ¨é‡ç”Ÿ\n\nğŸ¤– æ™ºèƒ½æ¨¡å¼\nâ€¢ è·Ÿéšæ¨¡å¼ï¼šè´´èº«ä¿æŠ¤\nâ€¢ é©»å®ˆæ¨¡å¼ï¼šå®šç‚¹é˜²å®ˆ",
        buttonText = "å¤ªé…·äº†"
    },
    {
        title = "ğŸ‘‘ ä¼šå‘˜ç³»ç»Ÿ",
        content = "ğŸ’ ä¼šå‘˜ç±»å‹\nâ€¢ å‘¨å¡ - 7å¤© æ¯æ—¥100é‡‘å¸\nâ€¢ æœˆå¡ - 30å¤© æ¯æ—¥100é‡‘å¸\nâ€¢ å­£å¡ - 90å¤© æ¯æ—¥100é‡‘å¸\nâ€¢ é«˜çº§æœˆå¡ - 30å¤© æ¯æ—¥200é‡‘å¸\nâ€¢ VIPå¹´å¡ - 365å¤© æ¯æ—¥150é‡‘å¸\n\nğŸ ä¼šå‘˜ç‰¹æƒ\nâ€¢ æ¯æ—¥ç™»å½•å¥–åŠ±\nâ€¢ æœ€å¤š7å¤©è¡¥å‘\nâ€¢ ä¸“å±å•†å“æŠ˜æ‰£\n\nâ° å¥–åŠ±æœºåˆ¶\nâ€¢ é¦–æ¬¡ç™»å½•è‡ªåŠ¨é¢†å–\nâ€¢ ç¦»çº¿å¥–åŠ±ç´¯ç§¯ä¿å­˜\nâ€¢ åˆ°æœŸåœæ­¢å‘æ”¾",
        buttonText = "å¾ˆæ£’"
    },
    {
        title = "ğŸ® å‡†å¤‡å¼€å§‹ï¼",
        content = "ğŸ“ æ­å–œï¼ä½ å·²ç»æŒæ¡äº†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½\n\nâœ… åŸºç¡€æ“ä½œ\nâ€¢ Eé”®æ‰“å¼€å•†åº—\nâ€¢ Hé”®æŸ¥çœ‹å¸®åŠ©\nâ€¢ Bé”®å¬å”¤æ— äººæœº\nâ€¢ Né”®æ”¶å›æ— äººæœº\nâ€¢ Mé”®åˆ‡æ¢æ— äººæœºæ¨¡å¼\n\nâœ… äº¤æ˜“ç³»ç»Ÿ\nâ€¢ è´­ä¹°å‡ºå”®å®Œæ•´æµç¨‹\nâ€¢ äº¤æ˜“è®°å½•æŸ¥è¯¢æ–¹æ³•\n\nâœ… è¿›é˜¶åŠŸèƒ½\nâ€¢ ä¼šå‘˜ç³»ç»Ÿå’Œæ¯æ—¥å¥–åŠ±\nâ€¢ æ— äººæœºæˆ˜æ–—ç³»ç»Ÿ\nâ€¢ æ•°æ®ç»Ÿè®¡å’Œè¶‹åŠ¿åˆ†æ\n\nğŸš€ ç°åœ¨å°±å¼€å§‹ä½ çš„å•†åº—ä¹‹æ—…å§ï¼\nğŸ’¡ æ˜æ™ºæŠ•èµ„å’Œäº¤æ˜“æ˜¯æˆåŠŸå…³é”®ï¼",
        buttonText = "å¼€å§‹æ¸¸æˆ"
    }
}

-- åˆ›å»ºæ•™ç¨‹UI
local function createTutorialGUI()
    if tutorialGui then
        tutorialGui:Destroy()
    end

    -- ä¸»GUI
    tutorialGui = Instance.new("ScreenGui")
    tutorialGui.Name = "TutorialGUI"
    tutorialGui.ResetOnSpawn = false
    tutorialGui.IgnoreGuiInset = true -- ä¸é®ç›–æ ¸å¿ƒGUIç•Œé¢
    tutorialGui.Parent = playerGui

    -- èƒŒæ™¯é®ç½©
    local overlay = Instance.new("TextButton")
    overlay.Name = "Overlay"
    overlay.Size = UDim2.new(1, 0, 1, 0)
    overlay.BackgroundColor3 = Color3.new(0, 0, 0)
    overlay.BackgroundTransparency = 0.3
    overlay.BorderSizePixel = 0
    overlay.Text = ""
    overlay.AutoButtonColor = false
    overlay.Parent = tutorialGui

    -- ä¸»é¢æ¿
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 580, 0, 420)
    mainFrame.Position = UDim2.new(0.5, -290, 0.5, -210)
    mainFrame.BackgroundColor3 = Color3.new(0.98, 0.98, 0.98)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = overlay

    -- é˜´å½±æ•ˆæœ
    local shadow = Instance.new("ImageLabel")
    shadow.Name = "Shadow"
    shadow.Size = UDim2.new(1, 20, 1, 20)
    shadow.Position = UDim2.new(0, -10, 0, -10)
    shadow.BackgroundTransparency = 1
    shadow.ImageColor3 = Color3.new(0, 0, 0)
    shadow.ImageTransparency = 0.8
    shadow.ScaleType = Enum.ScaleType.Slice
    shadow.SliceCenter = Rect.new(10, 10, 10, 10)
    shadow.ZIndex = mainFrame.ZIndex - 1
    shadow.Parent = overlay

    -- åœ†è§’
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 20)
    corner.Parent = mainFrame

    -- æ ‡é¢˜èƒŒæ™¯
    local titleBg = Instance.new("Frame")
    titleBg.Name = "TitleBackground"
    titleBg.Size = UDim2.new(1, 0, 0, 80)
    titleBg.Position = UDim2.new(0, 0, 0, 0)
    titleBg.BackgroundColor3 = Color3.fromRGB(52, 152, 219)
    titleBg.BorderSizePixel = 0
    titleBg.Parent = mainFrame

    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 20)
    titleCorner.Parent = titleBg

    -- æ ‡é¢˜æ–‡æœ¬
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "Title"
    titleLabel.Size = UDim2.new(1, -40, 1, 0)
    titleLabel.Position = UDim2.new(0, 20, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = tutorialSteps[1].title
    titleLabel.TextColor3 = Color3.new(1, 1, 1)
    titleLabel.TextSize = 24
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextXAlignment = Enum.TextXAlignment.Center
    titleLabel.TextYAlignment = Enum.TextYAlignment.Center
    titleLabel.Parent = titleBg

    -- å†…å®¹åŒºåŸŸ
    local contentFrame = Instance.new("Frame")
    contentFrame.Name = "ContentFrame"
    contentFrame.Size = UDim2.new(1, -40, 0, 240)
    contentFrame.Position = UDim2.new(0, 20, 0, 100)
    contentFrame.BackgroundTransparency = 1
    contentFrame.Parent = mainFrame

    local contentLabel = Instance.new("TextLabel")
    contentLabel.Name = "Content"
    contentLabel.Size = UDim2.new(1, 0, 1, 0)
    contentLabel.Position = UDim2.new(0, 0, 0, 0)
    contentLabel.BackgroundTransparency = 1
    contentLabel.Text = tutorialSteps[1].content
    contentLabel.TextColor3 = Color3.fromRGB(44, 62, 80)
    contentLabel.TextSize = 16
    contentLabel.Font = Enum.Font.Gotham
    contentLabel.TextWrapped = true
    contentLabel.TextXAlignment = Enum.TextXAlignment.Left
    contentLabel.TextYAlignment = Enum.TextYAlignment.Top
    contentLabel.Parent = contentFrame

    -- æ­¥éª¤æŒ‡ç¤ºå™¨
    local stepFrame = Instance.new("Frame")
    stepFrame.Name = "StepIndicator"
    stepFrame.Size = UDim2.new(1, -40, 0, 30)
    stepFrame.Position = UDim2.new(0, 20, 0, 350)
    stepFrame.BackgroundTransparency = 1
    stepFrame.Parent = mainFrame

    local stepLayout = Instance.new("UIListLayout")
    stepLayout.FillDirection = Enum.FillDirection.Horizontal
    stepLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    stepLayout.Padding = UDim.new(0, 10)
    stepLayout.Parent = stepFrame

    -- åˆ›å»ºæ­¥éª¤æŒ‡ç¤ºç‚¹
    for i = 1, #tutorialSteps do
        local dot = Instance.new("Frame")
        dot.Name = "Dot" .. i
        dot.Size = UDim2.new(0, 12, 0, 12)
        dot.BackgroundColor3 = i == 1 and Color3.new(0.2, 0.6, 1) or Color3.new(0.8, 0.8, 0.8)
        dot.BorderSizePixel = 0
        dot.Parent = stepFrame

        local dotCorner = Instance.new("UICorner")
        dotCorner.CornerRadius = UDim.new(0.5, 0)
        dotCorner.Parent = dot
    end

    -- æŒ‰é’®
    local nextButton = Instance.new("TextButton")
    nextButton.Name = "NextButton"
    nextButton.Size = UDim2.new(0, 130, 0, 50)
    nextButton.Position = UDim2.new(1, -150, 1, -70)
    nextButton.BackgroundColor3 = Color3.fromRGB(46, 204, 113)
    nextButton.BorderSizePixel = 0
    nextButton.Text = tutorialSteps[1].buttonText
    nextButton.TextColor3 = Color3.new(1, 1, 1)
    nextButton.TextSize = 18
    nextButton.Font = Enum.Font.GothamSemibold
    nextButton.Parent = mainFrame

    -- æŒ‰é’®é˜´å½±
    local btnShadow = Instance.new("Frame")
    btnShadow.Name = "ButtonShadow"
    btnShadow.Size = UDim2.new(1, 4, 1, 4)
    btnShadow.Position = UDim2.new(0, -2, 0, 2)
    btnShadow.BackgroundColor3 = Color3.new(0, 0, 0)
    btnShadow.BackgroundTransparency = 0.8
    btnShadow.BorderSizePixel = 0
    btnShadow.ZIndex = nextButton.ZIndex - 1
    btnShadow.Parent = nextButton

    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 12)
    buttonCorner.Parent = nextButton

    local shadowCorner = Instance.new("UICorner")
    shadowCorner.CornerRadius = UDim.new(0, 12)
    shadowCorner.Parent = btnShadow

    -- æŒ‰é’®æ‚¬åœæ•ˆæœ
    nextButton.MouseEnter:Connect(function()
        local hoverTween = TweenService:Create(
            nextButton,
            TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
            {BackgroundColor3 = Color3.fromRGB(39, 174, 96)}
        )
        hoverTween:Play()
    end)

    nextButton.MouseLeave:Connect(function()
        local hoverTween = TweenService:Create(
            nextButton,
            TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
            {BackgroundColor3 = Color3.fromRGB(46, 204, 113)}
        )
        hoverTween:Play()
    end)

    -- å…³é—­æŒ‰é’®
    local closeButton = Instance.new("TextButton")
    closeButton.Name = "CloseButton"
    closeButton.Size = UDim2.new(0, 35, 0, 35)
    closeButton.Position = UDim2.new(1, -45, 0, 10)
    closeButton.BackgroundColor3 = Color3.fromRGB(231, 76, 60)
    closeButton.BorderSizePixel = 0
    closeButton.Text = "âœ•"
    closeButton.TextColor3 = Color3.new(1, 1, 1)
    closeButton.TextSize = 18
    closeButton.Font = Enum.Font.GothamBold
    closeButton.Parent = titleBg

    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 17)
    closeCorner.Parent = closeButton

    -- å…³é—­æŒ‰é’®æ‚¬åœæ•ˆæœ
    closeButton.MouseEnter:Connect(function()
        local hoverTween = TweenService:Create(
            closeButton,
            TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
            {BackgroundColor3 = Color3.fromRGB(192, 57, 43)}
        )
        hoverTween:Play()
    end)

    closeButton.MouseLeave:Connect(function()
        local hoverTween = TweenService:Create(
            closeButton,
            TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out),
            {BackgroundColor3 = Color3.fromRGB(231, 76, 60)}
        )
        hoverTween:Play()
    end)

    -- æŒ‰é’®äº‹ä»¶
    nextButton.MouseButton1Click:Connect(function()
        nextStep()
    end)

    closeButton.MouseButton1Click:Connect(function()
        hideTutorial()
    end)

    -- èƒŒæ™¯é®ç½©ç‚¹å‡»å…³é—­
    overlay.MouseButton1Click:Connect(function()
        hideTutorial()
    end)

    -- åŠ¨ç”»æ•ˆæœ
    mainFrame.Size = UDim2.new(0, 0, 0, 0)
    mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)

    local openTween = TweenService:Create(
        mainFrame,
        TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
        {
            Size = UDim2.new(0, 500, 0, 350),
            Position = UDim2.new(0.5, -250, 0.5, -175)
        }
    )
    openTween:Play()

    return mainFrame
end

-- æ›´æ–°æ•™ç¨‹å†…å®¹
local function updateTutorialContent()
    if not tutorialGui then return end

    local mainFrame = tutorialGui.Overlay.MainFrame
    local titleLabel = mainFrame.TitleBackground.Title
    local contentLabel = mainFrame.ContentFrame.Content
    local nextButton = mainFrame.NextButton
    local stepFrame = mainFrame.StepIndicator

    -- æ›´æ–°å†…å®¹
    titleLabel.Text = tutorialSteps[currentStep].title
    contentLabel.Text = tutorialSteps[currentStep].content
    nextButton.Text = tutorialSteps[currentStep].buttonText

    -- æ›´æ–°æ­¥éª¤æŒ‡ç¤ºå™¨
    for i = 1, #tutorialSteps do
        local dot = stepFrame:FindFirstChild("Dot" .. i)
        if dot then
            dot.BackgroundColor3 = i == currentStep and Color3.fromRGB(52, 152, 219) or Color3.fromRGB(189, 195, 199)

            -- ç§»é™¤æ—§çš„é«˜äº®æ•ˆæœ
            local oldHighlight = dot:FindFirstChild("Highlight")
            if oldHighlight then
                oldHighlight:Destroy()
            end

            -- ä¸ºå½“å‰æ­¥éª¤æ·»åŠ é«˜äº®æ•ˆæœ
            if i == currentStep then
                local highlight = Instance.new("Frame")
                highlight.Name = "Highlight"
                highlight.Size = UDim2.new(1, 6, 1, 6)
                highlight.Position = UDim2.new(0, -3, 0, -3)
                highlight.BackgroundColor3 = Color3.fromRGB(52, 152, 219)
                highlight.BackgroundTransparency = 0.6
                highlight.BorderSizePixel = 0
                highlight.ZIndex = dot.ZIndex - 1
                highlight.Parent = dot

                local highlightCorner = Instance.new("UICorner")
                highlightCorner.CornerRadius = UDim.new(0.5, 0)
                highlightCorner.Parent = highlight
            end
        end
    end
end

-- ä¸‹ä¸€æ­¥
function nextStep()
    currentStep = currentStep + 1

    if currentStep > #tutorialSteps then
        hideTutorial()
    else
        updateTutorialContent()
    end
end

-- æ˜¾ç¤ºæ•™ç¨‹
function TutorialUI.showTutorial()
    if isShowing then return end

    isShowing = true
    currentStep = 1
    createTutorialGUI()
end

-- éšè—æ•™ç¨‹
function hideTutorial()
    if not isShowing or not tutorialGui then return end

    local mainFrame = tutorialGui.Overlay.MainFrame

    local closeTween = TweenService:Create(
        mainFrame,
        TweenInfo.new(0.2, Enum.EasingStyle.Back, Enum.EasingDirection.In),
        {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0.5, 0, 0.5, 0)
        }
    )

    closeTween:Play()
    closeTween.Completed:Connect(function()
        if tutorialGui then
            tutorialGui:Destroy()
            tutorialGui = nil
        end
        isShowing = false
    end)
end

-- éšè—æ•™ç¨‹ï¼ˆå…¬å…±æ¥å£ï¼‰
function TutorialUI.hideTutorial()
    hideTutorial()
end

-- æ£€æŸ¥æ˜¯å¦æ­£åœ¨æ˜¾ç¤º
function TutorialUI.isShowing()
    return isShowing
end

-- åˆå§‹åŒ–
function TutorialUI.initialize()
    -- å»¶è¿Ÿ3ç§’æ˜¾ç¤ºæ•™ç¨‹ï¼Œç»™ç©å®¶ä¸€äº›æ—¶é—´é€‚åº”
    spawn(function()
        wait(3)
        TutorialUI.showTutorial()
    end)
end

return TutorialUI
