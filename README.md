# 🏪 Roblox 新版商店系统

一个功能完整的 Roblox 商店系统，支持购买和出售物品，具有现代化 UI 设计和完善的功能体验。

## 📋 目录

- [✨ 功能特性](#-功能特性)
- [🚀 快速开始](#-快速开始)
- [🎮 操作指南](#-操作指南)
- [🛍️ 商品清单](#️-商品清单)
- [📁 项目结构](#-项目结构)
- [🐛 故障排除](#-故障排除)

## ✨ 功能特性

### 🛒 商店系统

- **8 种精美商品**: 剑、药水、盾牌、宝石、护甲、弓箭、卷轴、面包
- **商品图片展示**: 每个商品都有专属图片和详细描述
- **智能库存管理**: 支持有限/无限库存，实时库存显示
- **分类系统**: 武器、防具、消耗品、魔法等分类管理
- **价格体系**: 每个物品都有独立的买入/卖出价格

### 💰 经济系统

- **金币系统**: 完整的虚拟货币管理，实时显示余额
- **80%回收机制**: 物品卖出获得原价 80% 的金币
- **数量自定义**: 支持批量购买/卖出，弹窗选择数量
- **数据持久化**: 自动保存玩家数据（Studio 环境模拟存储）

### 🎨 现代化 UI 设计

- **毛玻璃效果**: 现代化的毛玻璃背景和模糊效果
- **圆角设计**: 所有 UI 元素都采用圆角设计，美观现代
- **分离式界面**: 购买和卖出界面完全分离
- **商品卡片**: 精美的商品展示卡片（图片+信息+价格+阴影）
- **数量选择器**: 专业的数量选择弹窗（+/-按钮、输入框）
- **动态库存**: 库存 UI 控件随物品数量动态增减
- **实时金币显示**: 顶部金币余额实时更新

### 📱 交互体验

- **三标签设计**: 购买、出售、记录三个独立标签页
- **快捷键操作**: E 键打开商店，H 键查看帮助，ESC 键关闭
- **智能界面切换**: 标签切换时自动清理界面，防止元素混合
- **统一按钮设计**: 所有功能按钮大小统一，视觉一致
- **帮助系统**: 按 H 键打开优化后的引导教程
- **系统通知**: 购买/卖出成功/失败的弹窗通知
- **管理员功能**: 记录页面包含管理员控制面板

## 🚀 快速开始

### 环境要求

- Roblox Studio
- Rojo 插件
- Git（可选）

### 安装步骤

1. **克隆项目**

   ```bash
   git clone <repository-url>
   cd shop
   ```

2. **启动 Rojo 服务器**

   ```bash
   rojo serve
   ```

3. **连接 Roblox Studio**

   - 打开 Roblox Studio
   - 运行 Rojo 插件并连接到 `localhost:34872`

4. **开始测试**
   - 按 F5 开始测试
   - 游戏会自动显示引导教程
   - 完成教程后按 **E** 键打开商店界面

## 🎮 操作指南

### 基本控制

- **E 键**: 打开/关闭商店界面
- **H 键**: 打开/关闭帮助界面
- **ESC 键**: 关闭当前界面（商店或帮助）
- **鼠标**: 点击按钮进行操作

### 购买流程

1. 打开商店（默认在购买模式）
2. 浏览商品卡片，查看价格和库存
3. 点击"🛒 购买"按钮
4. 在弹窗中选择购买数量（+/-按钮或直接输入）
5. 点击"确认"完成购买

### 出售流程

1. 点击"💰 出售"标签切换到出售界面
2. 查看你拥有的物品和数量
3. 点击商品的"💰 出售"按钮
4. 在弹窗中选择出售数量
5. 确认出售获得金币（原价 80%）

### 记录查看

1. 点击"📊 记录"标签切换到记录界面
2. 查看所有购买和出售历史记录
3. 管理员可点击"👑 管理"查看全服数据
4. 记录包含时间、物品、数量、金额信息

## 🛍️ 商品清单

| 商品        | 价格     | 卖出价   | 库存 | 分类   |
| ----------- | -------- | -------- | ---- | ------ |
| ⚔️ 铁剑     | 100 金币 | 80 金币  | 10   | 武器   |
| 🧪 生命药水 | 50 金币  | 40 金币  | ∞    | 消耗品 |
| 🛡️ 木盾     | 80 金币  | 64 金币  | 15   | 防具   |
| 💎 魔法宝石 | 200 金币 | 160 金币 | 5    | 魔法   |
| 🥼 皮革护甲 | 150 金币 | 120 金币 | 8    | 防具   |
| 🏹 长弓     | 120 金币 | 96 金币  | 12   | 武器   |
| 📜 魔法卷轴 | 75 金币  | 60 金币  | ∞    | 魔法   |
| 🍞 面包     | 25 金币  | 20 金币  | ∞    | 消耗品 |

## 📁 项目结构

```
shop/
├── src/
│   ├── client/                      # 客户端脚本
│   │   ├── init.client.luau         # 客户端入口
│   │   ├── ShopUI.luau              # 主商店界面（协调器）
│   │   ├── ShopBuy.luau             # 购买界面模块
│   │   ├── ShopSell.luau            # 出售界面模块
│   │   ├── ShopRecords.luau         # 记录界面模块
│   │   ├── ShopAdmin.luau           # 管理员界面模块
│   │   ├── ShopUtils.luau           # UI 工具函数
│   │   └── TutorialUI.luau          # 引导教程界面
│   ├── server/                      # 服务端脚本
│   │   ├── Bootstrap.server.luau    # 启动脚本
│   │   ├── SetupReplicatedStorage.luau # 模块设置
│   │   ├── init.server.luau         # 主服务端逻辑
│   │   └── DataManager.luau         # 数据管理（支持Studio）
│   └── shared/                      # 共享模块
│       ├── ShopData.luau            # 商店数据结构
│       └── ShopEvents.luau          # 远程事件定义
├── default.project.json             # Rojo 项目配置
└── README.md                        # 项目说明
```

### 模块化设计

#### 客户端模块

**ShopUtils.luau** - 公用工具类

- 🎨 颜色主题：统一的 UI 颜色方案
- 🔘 按钮创建：现代化按钮组件
- 🔧 圆角工具：UI 圆角效果
- 📢 通知系统：统一的消息提示
- 🔊 音效管理：音效资源管理

**ShopBuy.luau** - 购买界面模块

- 🛒 商品卡片：购买模式的商品展示
- 📦 库存显示：实时库存信息
- 💰 价格展示：商品价格显示
- 🔘 购买按钮：购买交互逻辑

**ShopSell.luau** - 出售界面模块

- 💰 卖出卡片：卖出模式的物品展示
- 📊 拥有数量：玩家物品数量显示
- 💵 卖出价格：80%回收价格计算
- 🔘 卖出按钮：卖出交互逻辑

**ShopRecords.luau** - 记录界面模块

- 📊 交易历史：购买/卖出记录展示
- ⏰ 时间戳：交易时间显示
- 💰 金额变化：收入/支出记录
- 👑 管理入口：管理员面板访问

**ShopAdmin.luau** - 管理员界面模块

- 👤 玩家管理：所有玩家数据展示
- 💰 金币管理：修改玩家金币
- 📊 统计信息：玩家交易统计
- 📋 记录查看：查看玩家交易历史

**ShopUI.luau** - 主协调器

- 🎮 界面管理：主界面创建和管理
- 🔄 模块协调：各子模块的协调
- 📡 事件处理：服务器通信处理
- 🎨 动画控制：开关动画效果
- ⌨️ 输入处理：键盘输入响应

## 🐛 故障排除

### 常见问题

**商店界面不显示**

- 检查控制台是否有 Lua 错误
- 确认 Rojo 正确同步了所有文件
- 重启 Studio 并重新连接 Rojo

**购买失败**

- 确认金币余额足够
- 检查商品库存是否充足
- 查看服务端控制台的错误信息

**出售失败**

- 确认拥有要出售的物品
- 检查出售数量是否超过拥有数量
- 切换到出售模式查看库存

**数据不保存**

- Studio 环境使用模拟存储，关闭 Studio 后数据会丢失
- 生产环境会自动保存到 Roblox 云端

### 调试信息

查看控制台输出获取详细的调试信息：

- `🏪` 商店系统相关
- `💰` 交易相关
- `📦` 库存相关
- `👤` 玩家相关
- `💾` 数据保存相关
